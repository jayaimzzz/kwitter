(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{166:function(e,t,n){e.exports=n.p+"static/media/kweet2.5f64a522.jpg"},168:function(e,t,n){e.exports=n.p+"static/media/Kweet.55890f9a.png"},5446:function(e,t,n){e.exports=n(5622)},5622:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(27),s=n.n(o),l=n(33),i=n(25),c=n(5628),u=n(34),d=n(165);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=n(14),p=n(15),h=n(17),g=n(16),f=n(24),E=n(5625),y=n(5627),b=n(5624),v=n(5626),w=n(29),k=n(22),j=n(62),O=n.n(j),C=n(66),U=n.n(C),I=n(65),S=n.n(I),x=n(31),T=n.n(x),P=n(52),N=n.n(P),L=n(67),A=n.n(L),D=n(68),R=n.n(D),K=n(64),M=n.n(K),W=n(63),_=n.n(W),F=n(72),z=n.n(F),B=n(20),G=n.n(B),H="https://kwitter-api.herokuapp.com",V="",q="LOGIN_USER",J="REFRESH_USERS",X="GET_MESSAGES",Y="LOGOUT",$="USER_IMAGE",Q=function(e){return function(t,n){var a=n().loggedInUser.id,r=n().messages.find(function(t){return t.id===e}).likes.find(function(e){return e.userId===a});r?t(Z(r.id)).then(function(){t(te(e))}):t(ee(e)).then(function(){t(te(e))})}},Z=function(e){return function(t,n){var a=n().loggedInUser.token;return G()({method:"DELETE",url:H+"/likes/"+e,headers:{Authorization:"Bearer "+a,"Content-Type":"application/json",charset:"utf-8"}}).then(function(e){e.data&&t({type:"REMOVE_LIKE",payload:e.data.like})}).catch(function(e){return console.log(e)})}},ee=function(e){return function(t,n){var a=n().loggedInUser.token;return G()({method:"POST",url:H+"/likes",headers:{Authorization:"Bearer "+a,"Content-Type":"application/json",charset:"utf-8"},data:{messageId:e}}).then(function(e){e.data&&t({type:"ADD_LIKE",payload:e.data.like})}).catch(function(e){return console.log(e)})}},te=function(e){return function(t){G.a.get(H+"/messages/"+e).then(function(e){e.data.message?t({type:"REFRESH_MESSAGE",payload:e.data.message}):console.log(e.data.error)}).catch(function(e){console.log(e)})}};function ne(){return function(e){return G.a.get(H+"/users?limit=10000&offset=0").then(function(t){t.data.users?e({type:J,payload:t.data.users}):console.log(t.data.error)}).catch(function(e){console.log(e)})}}function ae(e,t){G.a.get(H+"/users/".concat(t,"/picture")).then(function(t){200==t.status&&t.headers["content-type"].includes("image")&&e({type:$,payload:Math.floor(1e4*Math.random())+1})}).catch(function(e){return null})}function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t){G.a.get(H+"/messages?limit=20&offset="+e).then(function(e){"OK"===e.statusText&&t({type:X,payload:{messages:e.data.messages}})}).catch(function(e){console.log(e)})}}var oe=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,n="https://picsum.photos/".concat(this.props.userId);return r.a.createElement(O.a,{className:t.pos},r.a.createElement(_.a,{avatar:r.a.createElement(M.a,{src:n,className:t.avatar}),action:r.a.createElement(T.a,{variant:"subtitle1"},z()(this.props.createdAt).fromNow()),title:this.props.username+":",classes:{title:t.title,action:t.date},onClick:function(){return et.push("/users/"+e.props.userId)}}),r.a.createElement(S.a,null,r.a.createElement(T.a,{variant:"body1",className:t.kweet},'"',this.props.text,'"')),r.a.createElement(U.a,null,r.a.createElement(N.a,{onClick:function(){return e.props.toggleLike(e.props.id)},className:t.like,color:this.props.liked?"secondary":"default"},r.a.createElement(A.a,null)),r.a.createElement(T.a,{variant:"subtitle1",className:t.like},this.props.likes.length),r.a.createElement(T.a,{variant:"subtitle1",className:t.separator}),this.props.deleteable&&r.a.createElement(N.a,{onClick:function(){window.confirm("Are you sure you want to delete this Kweet?")&&e.props.deleteKweet(e.props.id)},className:t.delete},r.a.createElement(R.a,null))))}}]),t}(a.Component),se=Object(i.b)(null,function(e){return{deleteKweet:function(t){e(function(e){return function(t,n){var a=n().loggedInUser.token;console.log(a),G()({method:"DELETE",url:H+"/messages/"+e,headers:{Authorization:"Bearer "+a,"Content-Type":"application/json",charset:"utf-8"}}).then(function(n){n?t({type:"DELETE_KWEET",payload:e}):console.log("delete kweet error")}).catch(function(e){return console.log(e)})}}(t))},toggleLike:function(t){e(Q(t))}}})(Object(k.withStyles)({card:{minWidth:275},kweet:{fontSize:18,color:"black",width:"100%",wordWrap:"break-word"},pos:{marginTop:12},avatar:{margin:0},title:{color:"darkgrey",fontSize:18},date:{fontSize:16},separator:{flexGrow:2}})(oe)),le={KweetList:{margin:"auto",marginTop:50,background:"#3f51b5",color:"white",textAlign:"center",borderRadius:"5px"}},ie=function(e){function t(){return Object(m.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.getMessages()}},{key:"render",value:function(){var e=this;return r.a.createElement(a.Fragment,null,r.a.createElement("h1",{style:le.KweetList},"Kweet Feed"),this.props.messages.map(function(t){var n,a=e.props.users.findIndex(function(e){return e.id===t.userId}),o=t.userId===e.props.loggedInUser.id,s=e.props.users[a],l=s?s.displayName:"anon",i=!!t.likes.filter(function(t){return t.userId===e.props.loggedInUser.id})[0];return r.a.createElement(se,(n={key:t.id,id:t.id,userId:t.userId,text:t.text,createdAt:t.createdAt,likes:t.likes,liked:i,username:l,deleteable:o},Object(w.a)(n,"userId",t.userId),Object(w.a)(n,"toggleLike",function(){return e.props.toggleLike(t.id)}),n))}))}}]),t}(a.Component),ce=Object(i.b)(function(e,t){return{messages:t.id?e.messages.filter(function(e){return e.userId===Number(t.id)}):e.messages,users:e.users,loggedInUser:e.loggedInUser}},function(e){return{getMessages:function(){e(re())},toggleLike:function(t){e(Q(t))}}})(ie),ue=n(70),de=n.n(ue),me=n(23),pe={root:{position:"fixed",top:0,width:"100%",zIndex:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}},he=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={anchor:null},n.handleMenuIconClick=function(e){n.setState({anchor:e.currentTarget})},n.handleClose=function(){n.setState({anchor:null})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=Boolean(this.state.anchor);return r.a.createElement("div",{style:pe.root},r.a.createElement(me.a,{position:"static"},r.a.createElement(me.u,null,r.a.createElement(me.n,{lgUp:!0},r.a.createElement(me.o,{className:e.menuButton,color:"inherit","aria-label":"Menu",onClick:this.handleMenuIconClick},r.a.createElement(de.a,null)),r.a.createElement(me.q,{open:t,anchorEl:this.state.anchor,style:{zIndex:2},anchorOrigin:{vertical:"top",horizontal:"right"},onClose:this.handleClose},r.a.createElement(me.r,{onClick:function(){return et.push("/me")}},"Your Profile"),r.a.createElement(me.r,{onClick:function(){return et.push("/users")}},"User List"))),r.a.createElement(me.v,{variant:"h6",color:"inherit",className:e.grow},"KWITTER"),r.a.createElement(me.c,{variant:"contained",color:"primary",onClick:this.props.logout},"Sign Out"),r.a.createElement(me.v,{variant:"h6",color:"inherit"},r.a.createElement(me.c,{variant:"contained",color:"primary",onClick:function(){return et.push("/")}},"Home")))))}}]),t}(a.Component),ge=Object(k.withStyles)(pe)(he),fe=n(51),Ee=n.n(fe),ye=n(69),be=n.n(ye),ve=255,we={NewPost:{margin:"auto",marginTop:"10vh",backgroundColor:"rgba(205, 205, 200, 0.9)",color:"white",textAlign:"center",width:"45vw"},PostButton:{color:"white",background:"grey"}},ke=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={message:"",charactersRemaining:ve},n.handleChange=function(e){n.setState({message:e.target.value,charactersRemaining:ve-e.target.value.length})},n.handleSubmit=function(e){n.props.addKweet({message:n.state.message,token:n.props.loggedInUser.token}),n.setState({message:"",charactersRemaining:ve})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:we.NewPost},r.a.createElement(be.a,{value:this.state.message,id:"outlined-textarea",label:"What are you doing?",placeholder:"Kweeting",multiline:!0,rows:"5",required:!0,margin:"normal",variant:"outlined",fullWidth:!0,inputProps:{maxLength:ve},onChange:this.handleChange}),r.a.createElement(me.v,{variant:"h6",style:{backgroundColor:"rgb(205, 205, 200)"}},this.state.charactersRemaining," Characters Remaining"),r.a.createElement(Ee.a,{style:we.PostButton,onClick:this.handleSubmit},"Post Kweet"))}}]),t}(a.Component),je=Object(k.withStyles)(we)(ke),Oe=Object(i.b)(function(e){return{loggedInUser:e.loggedInUser}},function(e){return{addKweet:function(t){return e(function(e){var t=e.message,n=e.token;return function(e){G()({method:"POST",url:H+"/messages",headers:{Authorization:"Bearer "+n,"Content-Type":"application/json",charset:"utf-8"},data:{text:t}}).then(function(){e(re())}).catch(function(e){return console.log(e)})}}(t))}}})(je),Ce=n(73),Ue=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,changePassword:!1,displayName:n.props.user.displayName,about:n.props.user.about,password:""},n.handleToggleSettings=function(){n.setState(function(e){return{open:!e.open}})},n.handleTogglePassword=function(){n.setState(function(e){return{changePassword:!e.changePassword}})},n.handleChange=function(e){return function(t){var a=t.target.value;return n.setState(Object(w.a)({},e,a))}},n.handleSubmit=function(){n.handleToggleSettings();var e={displayName:n.state.displayName};n.state.about&&(e.about=n.state.about),n.props.updateUser(n.props.token,e)},n.handlePasswordSubmit=function(){n.handleTogglePassword();var e={password:n.state.password};n.props.updateUser(n.props.token,e)},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.open,n=e.changePassword;return r.a.createElement(a.Fragment,null,r.a.createElement(me.o,{onClick:this.handleToggleSettings,size:"small"},r.a.createElement(Ce.b,null)),r.a.createElement(me.i,{open:t,onClose:this.handleToggleSettings,fullWidth:!0,maxWidth:"xs"},r.a.createElement(me.l,null,"User Settings"),r.a.createElement(me.j,null,r.a.createElement(me.k,null,"Please adjust your profile information"),r.a.createElement("form",null,r.a.createElement(me.t,{label:"DisplayName",value:this.state.displayName,onChange:this.handleChange("displayName"),margin:"normal",fullWidth:!0}),r.a.createElement("br",null),r.a.createElement(me.t,{multiline:!0,rows:"4",label:"About",value:this.state.about,onChange:this.handleChange("about"),margin:"normal",fullWidth:!0}),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(me.c,{onClick:this.handleTogglePassword,variant:"contained",color:"primary"},"Change Password"),r.a.createElement(me.c,{onClick:this.handleSubmit,color:"secondary",disabled:!this.state.displayName},"Save Changes")),r.a.createElement(me.c,{onClick:this.props.handleDeleteUser,color:"secondary"},"Delete User")),r.a.createElement(me.i,{open:n,onClose:this.handleTogglePassword,fullWidth:!0,maxWidth:"xs"},r.a.createElement(me.l,null,"Password"),r.a.createElement(me.j,null,r.a.createElement(me.k,null,"Please enter your new password"),r.a.createElement("form",null,r.a.createElement(me.t,{label:"Password",type:"password",value:this.state.password,onChange:this.handleChange("password"),margin:"normal",fullWidth:!0}),r.a.createElement(me.c,{onClick:this.handlePasswordSubmit,color:"secondary",disabled:!this.state.password},"Save Changes")))))))}}]),t}(a.Component),Ie=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,file:null},n.handleToggle=function(){n.setState(function(e){return{open:!e.open}})},n.handleFileChange=function(e){var t=e.target.files[0];n.setState({file:t})},n.handleUpload=function(e){var t=n.state.file;n.handleToggle(),n.props.uploadImage({token:n.props.token,image:t})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.open;return r.a.createElement(a.Fragment,null,r.a.createElement(me.o,{onClick:this.handleToggle,size:"small"},r.a.createElement(Ce.a,null)),r.a.createElement(me.i,{open:e,onClose:this.handleToggle,fullWidth:!0,maxWidth:"xs"},r.a.createElement(me.l,null,"User Photo"),r.a.createElement(me.j,null,r.a.createElement(me.k,null,"Would you like to update your photo?"),r.a.createElement("form",null,r.a.createElement(me.p,{type:"file",onChange:this.handleFileChange}),r.a.createElement(me.c,{color:"secondary",onClick:this.handleUpload},"Save Changes")))))}}]),t}(a.Component),Se=Object(i.b)(null,function(e){return{uploadImage:function(t){return e(function(e){var t=e.token,n=e.image;return function(e,a){var r=new FormData;r.append("picture",n),G.a.put(H+"/users/picture",r,{headers:{Authorization:"Bearer "+t,"Content-Type":"multipart/form-data"}}).then(function(t){200==t.status&&ae(e,a().loggedInUser.id)}).catch(function(e){return console.log(e)})}}(t))}}})(Ie),xe=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).handleDeleteUser=function(){window.confirm("Are you sure you want to delete your account?")&&n.props.deleteUser()},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=!this.props.notFullPage;return r.a.createElement(a.Fragment,null,e&&r.a.createElement(ge,null),e&&r.a.createElement("div",{style:{height:70}}),r.a.createElement(me.d,null,r.a.createElement(me.f,null,this.props.user?r.a.createElement(a.Fragment,null,r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement(me.g,{title:this.props.user.displayName}),r.a.createElement(me.e,null,this.props.loggedInUsersProfile&&r.a.createElement(a.Fragment,null,r.a.createElement(Se,{token:this.props.token}),r.a.createElement(Ue,{user:this.props.user,updateUser:this.props.updateUser,token:this.props.token,handleDeleteUser:this.handleDeleteUser})))),this.props.loggedInUsersProfile&&this.props.image?r.a.createElement(me.h,{image:"https://kwitter-api.herokuapp.com/users/".concat(this.props.user.id,"/picture?random=").concat(this.props.image),style:{backgroundSize:"contain"}},r.a.createElement("img",{src:"https://kwitter-api.herokuapp.com/users/".concat(this.props.user.id,"/picture?random=").concat(this.props.image),style:{visibility:"hidden",maxWidth:"100%"},alt:"hidden"})):r.a.createElement(me.h,{image:"https://picsum.photos/".concat(this.props.user.id),style:{backgroundSize:"contain"}},r.a.createElement("img",{src:"https://picsum.photos/".concat(this.props.user.id),style:{visibility:"hidden",maxWidth:"100%"},alt:"hidden"})),r.a.createElement("span",null,"Logged in as: ",this.props.user.username),r.a.createElement("br",null),r.a.createElement("span",null,"About: ",this.props.user.about),r.a.createElement("br",null),r.a.createElement("span",null,"Member since: ",z()(this.props.user.createdAt).fromNow()),r.a.createElement("br",null)):null)))}}]),t}(a.Component),Te=Object(i.b)(function(e,t){var n=t.id?t.id:e.loggedInUser.id,a=n==e.loggedInUser.id;return{user:e.users.filter(function(e){return e.id==n})[0],token:e.loggedInUser.token,image:e.image,loggedInUsersProfile:a}},function(e){return{updateUser:function(t,n){return e(function(e,t){return function(n,a){var r=a().loggedInUser.id;G.a.patch(H+"/users",t,{headers:{Authorization:"Bearer "+e,"Content-Type":"application/json"}}).then(function(e){console.log("dispatching update user"),n({type:"UPDATE_USER",payload:{userInfo:t,userId:r}})}).catch(function(e){return console.log(e)})}}(t,n))},deleteUser:function(){return e(function(e,t){G.a.delete(H+"/users",{headers:{Authorization:"Bearer "+t().loggedInUser.token}}).then(function(t){200==t.status?e({type:Y}):console.log("delete user request unsuccessful")}).catch(function(e){return console.log(e)})})}}})(xe),Pe={Paper:{alignItems:"center",display:"flex",padding:10,marginTop:10}},Ne=function(e){var t=e.displayName,n=e.image,a=e.onClick,o=e.userId;return r.a.createElement(me.s,{style:Pe.Paper,onClick:a},r.a.createElement(me.b,{src:n||"https://picsum.photos/".concat(o),style:{height:60,width:60,marginLeft:20}}),r.a.createElement(me.v,{variant:"h6",style:{flexGrow:1}},t))},Le={UserList:{margin:"auto",color:"white",textAlign:"center",height:"80vh",width:340,overflow:"scroll",position:"fixed"},h1:{background:"#3f51b5",color:"white",lineHeight:"60px",position:"fixed",width:"inherit",marginTop:0,zIndex:1,borderRadius:"5px"}},Ae=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).handleUserClick=function(e){return function(t){et.push("/users/"+e)}},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsers()}},{key:"render",value:function(){var e=this,t=!this.props.notFullPage;return r.a.createElement(a.Fragment,null,t&&r.a.createElement(ge,null),t&&r.a.createElement("div",{style:{height:70}}),r.a.createElement("div",{style:Le.UserList},r.a.createElement("h1",{style:Le.h1},"Users"),r.a.createElement("div",{style:{marginTop:"60px"}},this.props.users.map(function(t){return r.a.createElement(Ne,{key:t.id,displayName:t.displayName,userId:t.id,onClick:e.handleUserClick(t.id)})}))))}}]),t}(a.Component),De=Object(i.b)(function(e){return{users:e.users}},function(e){return{getUsers:function(){e(ne())},getUserMessages:function(t){e(function(e){return function(t){G.a.get(H+"/users/"+e).then(function(e){e.data.messages?t({type:X,payload:{messages:e.data.messages}}):console.log(e)}).catch(function(e){return console.log(e)})}}(t))}}})(Ae),Re=n(5623),Ke=n(166),Me={root:{flexGrow:1,backgroundColor:"lightgray",background:"url(".concat(n.n(Ke).a,") no-repeat center center fixed"),backgroundSize:"contain",height:"100vh",width:"100vw",margin:0},Paper:{backgroundColor:"rgba(245, 245, 245, .9)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:500,padding:"4vw"},form:{display:"flex",flexDirection:"column"}},We=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",redirectToRegister:!1,redirectToHome:!1},n.handleKeyUp=function(e){13===e.keyCode&&n.handleSubmit(e)},n.handleChange=function(e){return function(t){n.setState(Object(w.a)({},e,t.target.value))}},n.handleSubmit=function(e){e.preventDefault(),n.props.logInUser({username:n.state.username,password:n.state.password}),n.setState({redirectToHome:!0})},n.register=function(){n.setState({redirectToRegister:!0})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){document.documentElement.addEventListener("keyup",this.handleKeyUp)}},{key:"componentWillUnmount",value:function(){document.documentElement.removeEventListener("keyup",this.handleKeyUp)}},{key:"render",value:function(){var e=this.props.classes;return this.props.loggedInUser?r.a.createElement(E.a,{to:"/"}):r.a.createElement(me.m,{container:!0,className:e.root,justify:"center",alignItems:"center"},r.a.createElement(me.s,{className:e.Paper},r.a.createElement(me.v,{variant:"h1"},"Login"),r.a.createElement("form",{className:e.form,noValidate:!0,autoComplete:"off"},r.a.createElement(me.t,{id:"username",label:"Username",value:this.state.username,onChange:this.handleChange("username"),autoFocus:!0}),r.a.createElement(me.t,{id:"password",label:"Password",type:"password",onChange:this.handleChange("password")}),r.a.createElement(me.c,{label:"Login",onClick:this.handleSubmit},"Login")),r.a.createElement(Re.a,{to:"/register",onClick:this.register},"Register as a new user")))}}]),t}(a.Component),_e=Object(k.withStyles)(Me)(We),Fe=Object(v.a)(Object(i.b)(function(e){return{loggedInUser:e.loggedInUser}},function(e){return{logInUser:function(t){return e(function(e){var t=e.username,n=e.password;return function(e){var a=null;G.a.post(H+"/auth/login",{username:t,password:n}).then(function(t){t.data.success?(a=t.data.id,e(ne()).then(function(){return e({type:q,payload:{id:t.data.id,token:t.data.token}})}).then(function(){return ae(e,a)})):console.log("Access Denied")}).catch(function(e){alert("Access Denied. Check your username and password, or register as a new user"),console.log(e)})}}(t))}}})(_e)),ze=n(168),Be={root:{flexGrow:1,backgroundColor:"pink",background:"url(".concat(n.n(ze).a,") no-repeat center center fixed"),backgroundSize:"contain",height:"100vh",width:"100vw",margin:0},Paper:{backgroundColor:"rgba(245, 245, 245, .9)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",maxWidth:500,padding:"4vw"},form:{display:"flex",flexDirection:"column"}},Ge=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",displayName:"",redirectToLogin:!1},n.handleKeyUp=function(e){13===e.keyCode&&n.handleSubmit(e)},n.handleChange=function(e){return function(t){n.setState(Object(w.a)({},e,t.target.value))}},n.handleSubmit=function(e){e.preventDefault(),G.a.post(H+"/auth/register",{username:n.state.username,password:n.state.password,displayName:n.state.displayName}).then(function(e){!1!==e.data.success?(n.props.getUsers(),n.setState({redirectToLogin:!0})):console.log("unable to register new user")}).catch(function(e){alert("Unable to register.  Username could be taken. Password may be terrible."),console.log(e)})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){document.documentElement.addEventListener("keyup",this.handleKeyUp)}},{key:"componentWillUnmount",value:function(){document.documentElement.removeEventListener("keyup",this.handleKeyUp)}},{key:"render",value:function(){var e=this.props.classes;return this.state.redirectToLogin?r.a.createElement(E.a,{to:"/login"}):r.a.createElement(me.m,{container:!0,className:e.root,justify:"center",alignItems:"center"},r.a.createElement(me.s,{className:e.Paper},r.a.createElement(me.v,{variant:"h1"},"Register"),r.a.createElement("form",{className:e.form,noValidate:!0,autoComplete:"off"},r.a.createElement(me.t,{id:"displayName",label:"DisplayName",value:this.state.displayName,onChange:this.handleChange("displayName"),autoFocus:!0}),r.a.createElement(me.t,{id:"username",label:"Username",value:this.state.username,onChange:this.handleChange("username")}),r.a.createElement(me.t,{id:"password",label:"Password",type:"password",onChange:this.handleChange("password")}),r.a.createElement(me.c,{label:"Login",onClick:this.handleSubmit},"Register")),r.a.createElement(Re.a,{to:"/login"},"Log in as an established user")))}}]),t}(a.Component),He=Object(k.withStyles)(Be)(Ge),Ve=Object(i.b)(null,function(e){return{getUsers:function(){return e(ne())}}})(He),qe=function(e){function t(){var e,n;Object(m.a)(this,t);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return(n=Object(h.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).componentDidMount=function(){window.addEventListener("scroll",n.loadMoreKweets)},n.loadMoreKweets=function(){document.documentElement.getBoundingClientRect().bottom<=document.documentElement.clientHeight+300&&n.props.getMessages(n.props.messageOffset)},n.handleLogout=function(){n.props.logout(n.props.loggedInUser.token)},n.renderMain=function(e){var t=e.filter;return r.a.createElement(a.Fragment,null,r.a.createElement(me.m,{container:!0,justify:"center",spacing:16,style:{marginTop:"10vh"}},r.a.createElement(ge,{logout:n.handleLogout})),r.a.createElement(me.m,{container:!0,justify:"center",spacing:16},r.a.createElement(me.n,{mdDown:!0},r.a.createElement(me.m,{item:!0,md:3,sm:9},r.a.createElement(Te,{id:t,notFullPage:!0}))),r.a.createElement(me.m,{item:!0,lg:6,md:7,sm:9,xs:12},!t&&r.a.createElement(Oe,null),r.a.createElement(ce,{id:t})),r.a.createElement(me.n,{smDown:!0},r.a.createElement(me.m,{item:!0,lg:3,md:4,sm:9,xs:12},r.a.createElement(De,{notFullPage:!0})))))},n.selectPage=function(e){var t=e.match;return n.props.loggedInUser?t.params.id?n.renderMain({filter:t.params.id}):n.renderMain({filter:null}):r.a.createElement(E.a,{to:"/login"})},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement(b.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(Fe,null)}}),r.a.createElement(b.a,{exact:!0,path:"/register",render:function(){return r.a.createElement(Ve,null)}}),r.a.createElement(b.a,{exact:!0,path:"/users",component:De}),r.a.createElement(b.a,{exact:!0,path:"/me",component:Te}),r.a.createElement(b.a,{exact:!0,path:"/",render:this.selectPage}),r.a.createElement(b.a,{path:"/users/:id",render:this.selectPage})))}}]),t}(a.Component),Je=Object(v.a)(Object(i.b)(function(e){return{loggedInUser:e.loggedInUser,messageOffset:e.messages.length}},function(e){return{getMessages:function(t){return e(re(t))},logout:function(t){return e(function(e){var t=e.token;return function(e){G.a.get(H+"/auth/logout",{headers:{Authorization:t,"Content-Type":"application/json"}}).then(function(t){return t.data.success?e({type:Y}):console.log("logout failed")}).catch(function(e){return console.log(e)})}}(t))}}})(qe)),Xe=[],Ye=n(169),$e=Object(l.c)({loggedInUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return t.payload;case Y:return"";default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_KWEET":return e.slice().push(t.payload);case"DELETE_KWEET":var n=e.slice(),a=n.findIndex(function(e){return e.id===t.payload});return n.splice(a,1),n;case X:var r=e.reduce(function(e,t){return e[t.id]=t,e},{});return t.payload.messages.forEach(function(e){return r[e.id]=e}),Object.values(r).sort(function(e,t){return t.id-e.id})||[];case"ADD_LIKE":case"REMOVE_LIKE":return e;case"REFRESH_MESSAGE":var o=e.slice(),s=o.findIndex(function(e){return e.id===t.payload.id});return o[s]=t.payload,o;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return{users:e.slice().push(t.payload.user)};case"DELETE_USER":return{users:e.slice().filter(function(e){return e.id!==t.payload.id})};case J:return t.payload;case"UPDATE_USER":return e.map(function(e){return e.id==t.payload.userId?Object(Ye.a)({},e,t.payload.userInfo):e});default:return e}},image:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return t.payload;case Y:return null;default:return e}}});n.d(t,"history",function(){return et});var Qe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,Ze=Object(l.e)($e,Qe(Object(l.a)(d.a))),et=Object(u.a)({basename:"/carlfsmithiii/kwitter"});s.a.render(r.a.createElement(function(e){var t=e.store;return r.a.createElement(i.a,{store:t},r.a.createElement(c.a,{history:et},r.a.createElement(Je,null)))},{store:Ze}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5446,2,1]]]);
//# sourceMappingURL=main.9ee0cabd.chunk.js.map